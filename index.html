<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ø°ÙƒÙŠ - AI Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .gradient-bg { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        .glass-effect { backdrop-filter: blur(10px); background: rgba(255, 255, 255, 0.1); }
        .ai-pulse { animation: pulse 2s infinite; }
        .floating-ai { position: fixed; bottom: 30px; left: 30px; z-index: 1000; }
        .card-hover { transition: all 0.3s ease; }
        .card-hover:hover { transform: translateY(-5px); box-shadow: 0 20px 40px rgba(0,0,0,0.1); }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
        .status-badge { @apply px-3 py-1 rounded-full text-xs font-medium; }
        .status-pending { @apply bg-yellow-100 text-yellow-800; }
        .status-delivered { @apply bg-green-100 text-green-800; }
        .status-returned { @apply bg-red-100 text-red-800; }
        .priority-high { @apply bg-red-500 text-white; }
        .priority-medium { @apply bg-orange-500 text-white; }
        .priority-low { @apply bg-blue-500 text-white; }
        
        /* ØªÙ†Ø³ÙŠÙ‚Ø§Øª Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© */
        .typing-dots span {
            animation: typing 1.5s infinite;
            opacity: 0;
        }
        .typing-dots span:nth-child(2) { animation-delay: 0.5s; }
        .typing-dots span:nth-child(3) { animation-delay: 1s; }
        @keyframes typing {
            0%, 100% { opacity: 0; }
            50% { opacity: 1; }
        }
        .user-message, .ai-message {
            animation: fadeIn 0.3s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        #chatContainer {
            scroll-behavior: smooth;
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Navigation -->
    <nav class="bg-white shadow-lg sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center">
                    <div class="flex-shrink-0">
                        <h1 class="text-2xl font-bold text-gray-900">ğŸ“Š Ù†Ø¸Ø§Ù… Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ø°ÙƒÙŠ</h1>
                    </div>
                </div>
                <div class="flex items-center space-x-4">
                    <a href="index.html" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors">
                        <i class="fas fa-tachometer-alt ml-2"></i>Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…
                    </a>
                    <a href="invoices.html" class="text-gray-600 hover:text-gray-900 px-4 py-2 rounded-lg hover:bg-gray-100 transition-colors">
                        <i class="fas fa-file-invoice ml-2"></i>Ø§Ù„ÙÙˆØ§ØªÙŠØ±
                    </a>
                    <a href="drivers.html" class="text-gray-600 hover:text-gray-900 px-4 py-2 rounded-lg hover:bg-gray-100 transition-colors">
                        <i class="fas fa-truck ml-2"></i>Ø§Ù„Ù…Ù†Ø§Ø¯ÙŠØ¨
                    </a>
                    <a href="alerts.html" class="text-gray-600 hover:text-gray-900 px-4 py-2 rounded-lg hover:bg-gray-100 transition-colors">
                        <i class="fas fa-bell ml-2"></i>Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª
                    </a>
                    <a href="new-orders.html" class="text-gray-600 hover:text-gray-900 px-4 py-2 rounded-lg hover:bg-gray-100 transition-colors">
                        <i class="fas fa-plus-circle ml-2"></i>Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
                    </a>
                    <a href="inventory.html" class="text-gray-600 hover:text-gray-900 px-4 py-2 rounded-lg hover:bg-gray-100 transition-colors">
                        <i class="fas fa-boxes ml-2"></i>Ø§Ù„Ù…Ø®Ø²ÙˆÙ†
                    </a>
                    <a href="archive.html" class="text-gray-600 hover:text-gray-900 px-4 py-2 rounded-lg hover:bg-gray-100 transition-colors">
                        <i class="fas fa-archive ml-2"></i>Ø§Ù„Ø£Ø±Ø´ÙŠÙ
                    </a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <!-- Header Section -->
        <div class="mb-8">
            <div class="gradient-bg rounded-2xl p-8 text-white card-hover">
                <div class="flex items-center justify-between">
                    <div>
                        <h2 class="text-3xl font-bold mb-2">Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨ÙƒÙ… ÙÙŠ Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ø°ÙƒÙŠ</h2>
                        <p class="text-blue-100 text-lg">ØªØ­Ù„ÙŠÙ„Ø§Øª Ø°ÙƒÙŠØ© ÙˆØªÙˆØµÙŠØ§Øª Ù…Ø®ØµØµØ© Ù…Ø¯Ø¹ÙˆÙ…Ø© Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ</p>
                    </div>
                    <div class="text-6xl opacity-80">
                        <i class="fas fa-robot"></i>
                    </div>
                </div>
            </div>
        </div>

        <!-- AI Status Cards -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
            <div class="bg-white rounded-xl p-6 shadow-lg card-hover border-l-4 border-blue-500">
                <div class="flex items-center">
                    <div class="p-3 rounded-full bg-blue-100 text-blue-600">
                        <i class="fas fa-file-invoice text-2xl"></i>
                    </div>
                    <div class="mr-4">
                        <p class="text-sm font-medium text-gray-600">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙÙˆØ§ØªÙŠØ±</p>
                        <p class="text-2xl font-bold text-gray-900" id="totalInvoices">0</p>
                    </div>
                </div>
            </div>

            <div class="bg-white rounded-xl p-6 shadow-lg card-hover border-l-4 border-green-500">
                <div class="flex items-center">
                    <div class="p-3 rounded-full bg-green-100 text-green-600">
                        <i class="fas fa-check-circle text-2xl"></i>
                    </div>
                    <div class="mr-4">
                        <p class="text-sm font-medium text-gray-600">Ù…Ø³Ù„Ù…Ø© Ø§Ù„ÙŠÙˆÙ…</p>
                        <p class="text-2xl font-bold text-gray-900" id="todayDeliveries">0</p>
                    </div>
                </div>
            </div>

            <div class="bg-white rounded-xl p-6 shadow-lg card-hover border-l-4 border-yellow-500">
                <div class="flex items-center">
                    <div class="p-3 rounded-full bg-yellow-100 text-yellow-600">
                        <i class="fas fa-clock text-2xl"></i>
                    </div>
                    <div class="mr-4">
                        <p class="text-sm font-medium text-gray-600">Ù‚ÙŠØ¯ Ø§Ù„ØªÙˆØµÙŠÙ„</p>
                        <p class="text-2xl font-bold text-gray-900" id="pendingDeliveries">0</p>
                    </div>
                </div>
            </div>

            <div class="bg-white rounded-xl p-6 shadow-lg card-hover border-l-4 border-red-500">
                <div class="flex items-center">
                    <div class="p-3 rounded-full bg-red-100 text-red-600">
                        <i class="fas fa-exclamation-triangle text-2xl"></i>
                    </div>
                    <div class="mr-4">
                        <p class="text-sm font-medium text-gray-600">ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ù…Ù‡Ù…Ø©</p>
                        <p class="text-2xl font-bold text-gray-900" id="criticalAlerts">0</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- AI Insights Cards -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8">
            <!-- Performance Summary -->
            <div class="bg-gradient-to-br from-blue-50 to-indigo-100 rounded-xl p-6 shadow-lg card-hover border border-blue-200">
                <h3 class="text-lg font-bold text-gray-800 mb-4 flex items-center">
                    <i class="fas fa-chart-line text-blue-600 ml-2"></i>
                    Ù…Ù„Ø®Øµ Ø§Ù„Ø£Ø¯Ø§Ø¡
                </h3>
                <div class="space-y-3 text-sm">
                    <div class="flex justify-between">
                        <span class="text-gray-600">Ø£ÙØ¶Ù„ Ù…Ù†Ø¯ÙˆØ¨:</span>
                        <span class="font-medium" id="topDriver">-</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-gray-600">Ù…ØªÙˆØ³Ø· ÙˆÙ‚Øª Ø§Ù„ØªÙˆØµÙŠÙ„:</span>
                        <span class="font-medium" id="avgDeliveryTime">-</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-gray-600">Ø£Ù†Ø´Ø· Ù…Ù†Ø·Ù‚Ø©:</span>
                        <span class="font-medium" id="mostActiveArea">-</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-gray-600">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª:</span>
                        <span class="font-medium text-green-600" id="totalRevenue">-</span>
                    </div>
                </div>
            </div>

            <!-- System Health -->
            <div class="bg-gradient-to-br from-green-50 to-emerald-100 rounded-xl p-6 shadow-lg card-hover border border-green-200">
                <h3 class="text-lg font-bold text-gray-800 mb-4 flex items-center">
                    <i class="fas fa-heartbeat text-green-600 ml-2"></i>
                    ØµØ­Ø© Ø§Ù„Ù†Ø¸Ø§Ù…
                </h3>
                <div class="space-y-3 text-sm">
                    <div class="flex justify-between">
                        <span class="text-gray-600">ÙƒÙØ§Ø¡Ø© Ø§Ù„Ù†Ø¸Ø§Ù…:</span>
                        <span class="font-medium" id="systemEfficiency">-</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-gray-600">Ø§Ù„Ø·Ø§Ù‚Ø© Ø§Ù„Ù…ØªØ§Ø­Ø©:</span>
                        <span class="font-medium" id="availableCapacity">-</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-gray-600">ÙÙˆØ§ØªÙŠØ± Ù…ØªØ£Ø®Ø±Ø©:</span>
                        <span class="font-medium text-red-600" id="delayedInvoices">-</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-gray-600">Ø£ÙˆÙ„ÙˆÙŠØ© Ø¹Ø§Ù„ÙŠØ©:</span>
                        <span class="font-medium text-orange-600" id="highPriority">-</span>
                    </div>
                </div>
            </div>

            <!-- Work Distribution -->
            <div class="bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg p-4 border border-purple-200">
                <h4 class="font-semibold text-gray-800 mb-3 flex items-center">
                    <i class="fas fa-users text-purple-600 ml-2"></i>
                    ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ø¹Ù…Ù„
                </h4>
                <div class="space-y-2 text-sm">
                    <div class="flex justify-between">
                        <span class="text-gray-600">Ù…Ù†Ø§Ø¯ÙŠØ¨ Ù…Ø´ØºÙˆÙ„ÙŠÙ†:</span>
                        <span class="font-medium" id="overloadedDrivers">-</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-gray-600">Ø£ÙˆÙ„ÙˆÙŠØ© Ø¹Ø§Ù„ÙŠØ©:</span>
                        <span class="font-medium" id="highPriorityCount">-</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-gray-600">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª:</span>
                        <span class="font-medium text-green-600" id="totalRevenueSummary">-</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- AI Recommendations -->
        <div class="bg-white rounded-xl p-6 shadow-lg card-hover mb-8" id="recommendationsSection" style="display: none;">
            <h3 class="text-xl font-bold text-gray-900 mb-6 flex items-center">
                <i class="fas fa-lightbulb text-yellow-500 ml-2"></i>
                ØªÙˆØµÙŠØ§Øª Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ
            </h3>
            <div id="recommendationsList" class="space-y-4">
                <!-- Recommendations will be loaded here -->
            </div>
        </div>

        <!-- Charts Section -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
            <!-- Status Distribution Chart -->
            <div class="bg-white rounded-xl p-6 shadow-lg card-hover">
                <h3 class="text-xl font-bold text-gray-900 mb-6 flex items-center">
                    <i class="fas fa-chart-pie text-indigo-600 ml-2"></i>
                    ØªÙˆØ²ÙŠØ¹ Ø­Ø§Ù„Ø§Øª Ø§Ù„ÙÙˆØ§ØªÙŠØ±
                </h3>
                <div id="statusChart" style="height: 300px;"></div>
            </div>

            <!-- Revenue Chart -->
            <div class="bg-white rounded-xl p-6 shadow-lg card-hover">
                <h3 class="text-xl font-bold text-gray-900 mb-6 flex items-center">
                    <i class="fas fa-chart-bar text-indigo-600 ml-2"></i>
                    Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª Ø­Ø³Ø¨ Ø§Ù„Ø­Ø§Ù„Ø©
                </h3>
                <div id="revenueChart" style="height: 300px;"></div>
            </div>
        </div>

        <!-- Delivery Performance Chart -->
        <div class="bg-white rounded-xl p-6 shadow-lg card-hover mb-8">
            <h3 class="text-xl font-bold text-gray-900 mb-6 flex items-center">
                <i class="fas fa-clock text-indigo-600 ml-2"></i>
                Ø£Ø¯Ø§Ø¡ Ø§Ù„ØªÙˆØµÙŠÙ„
            </h3>
            <div id="deliveryChart" style="height: 300px;"></div>
        </div>

        <!-- Recent Invoices Table -->
        <div class="bg-white rounded-xl p-6 shadow-lg card-hover">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-xl font-bold text-gray-900 flex items-center">
                    <i class="fas fa-list text-indigo-600 ml-2"></i>
                    Ø£Ø­Ø¯Ø« Ø§Ù„ÙÙˆØ§ØªÙŠØ±
                </h3>
                <a href="invoices.html" class="bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors">
                    Ø¹Ø±Ø¶ Ø§Ù„ÙƒÙ„ <i class="fas fa-arrow-left ml-1"></i>
                </a>
            </div>
            
            <div class="overflow-x-auto">
                <table class="w-full">
                    <thead>
                        <tr class="bg-gray-50">
                            <th class="px-4 py-3 text-right font-semibold text-gray-700">Ø±Ù‚Ù… Ø§Ù„ÙØ§ØªÙˆØ±Ø©</th>
                            <th class="px-4 py-3 text-right font-semibold text-gray-700">Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„</th>
                            <th class="px-4 py-3 text-right font-semibold text-gray-700">Ø§Ù„Ù…Ø¨Ù„Øº</th>
                            <th class="px-4 py-3 text-right font-semibold text-gray-700">Ø§Ù„Ø­Ø§Ù„Ø©</th>
                            <th class="px-4 py-3 text-right font-semibold text-gray-700">Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©</th>
                            <th class="px-4 py-3 text-right font-semibold text-gray-700">Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨</th>
                            <th class="px-4 py-3 text-right font-semibold text-gray-700">Ø§Ù„ØªØ§Ø±ÙŠØ®</th>
                        </tr>
                    </thead>
                    <tbody id="recentInvoicesTable">
                        <!-- Recent invoices will be loaded here -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Floating AI Assistant -->
    <div class="floating-ai">
        <button id="aiAssistantBtn" class="bg-gradient-to-r from-purple-600 to-pink-600 text-white p-4 rounded-full shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-110 ai-pulse">
            <i class="fas fa-robot text-2xl"></i>
        </button>
        <div id="aiNotificationBadge" class="absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full w-6 h-6 flex items-center justify-center hidden">0</div>
    </div>

    <!-- AI Assistant Modal - Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© Ù…Ø¹ Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© Ø§Ù„ÙƒØªØ§Ø¨ÙŠØ© -->
    <div id="aiModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center">
        <div class="bg-white rounded-2xl p-6 max-w-2xl w-full mx-4 max-h-[80vh] overflow-y-auto">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-bold text-gray-900 flex items-center">
                    <i class="fas fa-robot text-purple-600 ml-2"></i>
                    Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø°ÙƒÙŠ - Ø¯Ø±Ø¯Ø´Ø© ÙƒØªØ§Ø¨ÙŠØ©
                </h3>
                <button id="closeAiModal" class="text-gray-400 hover:text-gray-600 text-2xl">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <!-- Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø© -->
            <div class="mb-4">
                <div id="chatContainer" class="bg-gray-50 rounded-lg p-4 h-64 overflow-y-auto mb-4">
                    <div class="ai-message bg-blue-100 rounded-lg p-3 mb-3 max-w-[80%] mr-auto">
                        <div class="font-semibold text-blue-800 mb-1">Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯:</div>
                        <div>Ù…Ø±Ø­Ø¨Ø§Ù‹! Ø£Ù†Ø§ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø°ÙƒÙŠ. ÙƒÙŠÙ ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ Ø§Ù„ÙŠÙˆÙ…ØŸ</div>
                    </div>
                    <!-- Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø³ØªØ¶Ø§Ù Ù‡Ù†Ø§ -->
                </div>
                
                <!-- Ø­Ù‚Ù„ Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ -->
                <div class="flex gap-2">
                    <input 
                        type="text" 
                        id="chatInput" 
                        placeholder="Ø§ÙƒØªØ¨ Ø³Ø¤Ø§Ù„Ùƒ Ù‡Ù†Ø§..." 
                        class="flex-1 border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-purple-500"
                        onkeypress="handleChatInput(event)"
                    >
                    <button 
                        onclick="sendMessage()" 
                        class="bg-purple-600 text-white px-6 py-3 rounded-lg hover:bg-purple-700 transition-colors"
                    >
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </div>
            </div>

            <!-- Ø£Ø³Ø¦Ù„Ø© Ø³Ø±ÙŠØ¹Ø© -->
            <div class="border-t pt-4">
                <h4 class="font-semibold text-gray-800 mb-3">Ø£Ø³Ø¦Ù„Ø© Ø³Ø±ÙŠØ¹Ø©:</h4>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-2 text-sm">
                    <button class="ai-question bg-blue-100 text-blue-800 px-3 py-2 rounded-lg text-right hover:bg-blue-200 transition-colors" onclick="askQuickQuestion('Ø£Ø¸Ù‡Ø± Ù„ÙŠ Ø£ÙƒØ«Ø± Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨ÙŠÙ† ØªØ£Ø®ÙŠØ±Ø§Ù‹')">
                        <i class="fas fa-clock ml-2"></i>Ø£ÙƒØ«Ø± Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨ÙŠÙ† ØªØ£Ø®ÙŠØ±Ø§Ù‹
                    </button>
                    <button class="ai-question bg-green-100 text-green-800 px-3 py-2 rounded-lg text-right hover:bg-green-200 transition-colors" onclick="askQuickQuestion('Ù…ÙŠÙ† Ø¹Ù†Ø¯Ù‡ ÙÙˆØ§ØªÙŠØ± Ù‚ÙŠØ¯ Ø§Ù„ØªØ³Ù„ÙŠÙ… Ø¨Ù‚Ø§Ù„Ù‡Ø§ Ø£ÙƒØªØ± Ù…Ù† 72 Ø³Ø§Ø¹Ø©ØŸ')">
                        <i class="fas fa-exclamation-triangle ml-2"></i>ÙÙˆØ§ØªÙŠØ± Ù…ØªØ£Ø®Ø±Ø©
                    </button>
                    <button class="ai-question bg-purple-100 text-purple-800 px-3 py-2 rounded-lg text-right hover:bg-purple-200 transition-colors" onclick="askQuickQuestion('Ù…ÙŠÙ† Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø§Ù„Ù„ÙŠ Ø·Ù„Ø¨Ø§ØªÙ‡ ÙƒØªÙŠØ± Ø§Ù„ÙØªØ±Ø© Ø¯ÙŠØŸ')">
                        <i class="fas fa-user ml-2"></i>Ø£Ù†Ø´Ø· Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡
                    </button>
                    <button class="ai-question bg-orange-100 text-orange-800 px-3 py-2 rounded-lg text-right hover:bg-orange-200 transition-colors" onclick="askQuickQuestion('ÙƒÙ… ÙØ§ØªÙˆØ±Ø© Ø§ØªØ³Ù„Ù…Øª Ø§Ù„Ù†Ù‡Ø§Ø±Ø¯Ù‡ØŸ')">
                        <i class="fas fa-check ml-2"></i>ÙÙˆØ§ØªÙŠØ± Ù…Ø³Ù„Ù…Ø© Ø§Ù„ÙŠÙˆÙ…
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
    <script>
        // Initialize dashboard
        document.addEventListener('DOMContentLoaded', function() {
            loadDashboardData();
            initializeCharts();
            setupAIAssistant();
        });

        async function loadDashboardData() {
            try {
                // Ø¨ÙŠØ§Ù†Ø§Øª Ø§ÙØªØ±Ø§Ø¶ÙŠØ© Ù„Ù„Ø¹Ø±Ø¶
                document.getElementById('totalInvoices').textContent = '156';
                document.getElementById('todayDeliveries').textContent = '12';
                document.getElementById('pendingDeliveries').textContent = '23';
                document.getElementById('criticalAlerts').textContent = '3';
                
                // ØªØ­Ø¯ÙŠØ« insights
                document.getElementById('topDriver').textContent = 'Ù…Ø­Ù…Ø¯ Ø£Ø­Ù…Ø¯';
                document.getElementById('avgDeliveryTime').textContent = '45 Ø¯Ù‚ÙŠÙ‚Ø©';
                document.getElementById('mostActiveArea').textContent = 'Ø§Ù„Ù…Ù‚Ø·Ù…';
                document.getElementById('totalRevenue').textContent = 'Ø¬.Ù… 125,000';
                
                document.getElementById('systemEfficiency').textContent = '85%';
                document.getElementById('availableCapacity').textContent = '65%';
                document.getElementById('delayedInvoices').textContent = '3';
                document.getElementById('highPriority').textContent = '5';
                
                document.getElementById('overloadedDrivers').textContent = '2';
                document.getElementById('highPriorityCount').textContent = '5';
                document.getElementById('totalRevenueSummary').textContent = 'Ø¬.Ù… 125,000';
                
                // ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ø­Ø¯ÙŠØ«Ø©
                loadRecentInvoices([
                    {
                        id: "INV001",
                        customerName: "Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯",
                        amount: 1250.50,
                        status: "Ù…Ø³Ù„Ù…Ø©",
                        priority: "Ø¹Ø§Ù„ÙŠØ©",
                        driverCode: "DRV-01",
                        date: "2024-01-15"
                    },
                    {
                        id: "INV002", 
                        customerName: "Ø³Ø§Ø±Ø© Ø£Ø­Ù…Ø¯",
                        amount: 875.25,
                        status: "Ù‚ÙŠØ¯ Ø§Ù„ØªÙˆØµÙŠÙ„",
                        priority: "Ù…ØªÙˆØ³Ø·Ø©",
                        driverCode: "DRV-02",
                        date: "2024-01-15"
                    }
                ]);
                
            } catch (error) {
                console.error('Error loading dashboard data:', error);
            }
        }

        function initializeCharts() {
            // Status Chart
            if (document.getElementById('statusChart')) {
                const statusChart = echarts.init(document.getElementById('statusChart'));
                const statusOption = {
                    tooltip: { trigger: 'item' },
                    series: [{
                        type: 'pie',
                        radius: '70%',
                        data: [
                            { value: 45, name: 'Ù…Ø³Ù„Ù…Ø©', itemStyle: { color: '#10b981' } },
                            { value: 30, name: 'Ù‚ÙŠØ¯ Ø§Ù„ØªÙˆØµÙŠÙ„', itemStyle: { color: '#f59e0b' } },
                            { value: 5, name: 'Ù…Ø±ØªØ¬Ø¹Ø©', itemStyle: { color: '#ef4444' } }
                        ],
                        emphasis: {
                            itemStyle: {
                                shadowBlur: 10,
                                shadowOffsetX: 0,
                                shadowColor: 'rgba(0, 0, 0, 0.5)'
                            }
                        }
                    }]
                };
                statusChart.setOption(statusOption);
            }

            // Revenue Chart
            if (document.getElementById('revenueChart')) {
                const revenueChart = echarts.init(document.getElementById('revenueChart'));
                const revenueOption = {
                    tooltip: { trigger: 'axis' },
                    xAxis: {
                        type: 'category',
                        data: ['Ù…Ø³Ù„Ù…Ø©', 'Ù‚ÙŠØ¯ Ø§Ù„ØªÙˆØµÙŠÙ„', 'Ù…Ø±ØªØ¬Ø¹Ø©']
                    },
                    yAxis: { type: 'value' },
                    series: [{
                        data: [
                            { value: 125000, itemStyle: { color: '#10b981' } },
                            { value: 85000, itemStyle: { color: '#f59e0b' } },
                            { value: 15000, itemStyle: { color: '#ef4444' } }
                        ],
                        type: 'bar',
                        barWidth: '60%'
                    }]
                };
                revenueChart.setOption(revenueOption);
            }

            // Delivery Chart
            if (document.getElementById('deliveryChart')) {
                const deliveryChart = echarts.init(document.getElementById('deliveryChart'));
                const deliveryOption = {
                    tooltip: { trigger: 'axis' },
                    xAxis: {
                        type: 'category',
                        data: ['Ø§Ù„Ø³Ø¨Øª', 'Ø§Ù„Ø£Ø­Ø¯', 'Ø§Ù„Ø¥Ø«Ù†ÙŠÙ†', 'Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡', 'Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡', 'Ø§Ù„Ø®Ù…ÙŠØ³', 'Ø§Ù„Ø¬Ù…Ø¹Ø©']
                    },
                    yAxis: { type: 'value' },
                    series: [{
                        data: [38, 42, 35, 45, 40, 38, 36],
                        type: 'line',
                        smooth: true,
                        itemStyle: { color: '#3b82f6' },
                        areaStyle: { color: 'rgba(59, 130, 246, 0.1)' }
                    }]
                };
                deliveryChart.setOption(deliveryOption);
            }
        }

        function loadRecentInvoices(invoices) {
            const tableBody = document.getElementById('recentInvoicesTable');
            if (!tableBody || !invoices.length) return;

            tableBody.innerHTML = invoices.map(invoice => `
                <tr class="border-b hover:bg-gray-50">
                    <td class="px-4 py-3 font-medium">${invoice.id}</td>
                    <td class="px-4 py-3">${invoice.customerName}</td>
                    <td class="px-4 py-3">Ø¬.Ù… ${invoice.amount.toLocaleString()}</td>
                    <td class="px-4 py-3">
                        <span class="status-badge ${invoice.status === 'Ù…Ø³Ù„Ù…Ø©' ? 'status-delivered' : invoice.status === 'Ù‚ÙŠØ¯ Ø§Ù„ØªÙˆØµÙŠÙ„' ? 'status-pending' : 'status-returned'}">
                            ${invoice.status}
                        </span>
                    </td>
                    <td class="px-4 py-3">
                        <span class="status-badge ${invoice.priority === 'Ø¹Ø§Ù„ÙŠØ©' ? 'priority-high' : invoice.priority === 'Ù…ØªÙˆØ³Ø·Ø©' ? 'priority-medium' : 'priority-low'}">
                            ${invoice.priority}
                        </span>
                    </td>
                    <td class="px-4 py-3">${invoice.driverCode}</td>
                    <td class="px-4 py-3">${invoice.date}</td>
                </tr>
            `).join('');
        }

        // Ù†Ø¸Ø§Ù… Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© Ø§Ù„ÙƒØªØ§Ø¨ÙŠØ© Ø§Ù„Ø¬Ø¯ÙŠØ¯
        function sendMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();
            
            if (message === '') return;
            
            // Ø¥Ø¶Ø§ÙØ© Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
            addMessageToChat('user', message);
            input.value = '';
            
            // Ù…Ø­Ø§ÙƒØ§Ø© Ø§Ù„ÙƒØªØ§Ø¨Ø©
            showTypingIndicator();
            
            // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø±Ø³Ø§Ù„Ø©
            setTimeout(() => {
                removeTypingIndicator();
                processAIMessage(message);
            }, 1000);
        }

        // Ø¥Ø¯Ø®Ø§Ù„ Ø¨Ø§Ù„Ø²Ø± Enter
        function handleChatInput(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        }

        // Ø¥Ø¶Ø§ÙØ© Ø±Ø³Ø§Ù„Ø© Ù„Ù„Ø¯Ø±Ø¯Ø´Ø©
        function addMessageToChat(sender, message) {
            const chatContainer = document.getElementById('chatContainer');
            const messageDiv = document.createElement('div');
            
            if (sender === 'user') {
                messageDiv.className = 'user-message bg-green-100 rounded-lg p-3 mb-3 max-w-[80%] ml-auto text-left';
                messageDiv.innerHTML = `
                    <div class="font-semibold text-green-800 mb-1">Ø£Ù†Øª:</div>
                    <div>${message}</div>
                `;
            } else {
                messageDiv.className = 'ai-message bg-blue-100 rounded-lg p-3 mb-3 max-w-[80%] mr-auto';
                messageDiv.innerHTML = `
                    <div class="font-semibold text-blue-800 mb-1">Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯:</div>
                    <div>${message}</div>
                `;
            }
            
            chatContainer.appendChild(messageDiv);
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }

        // Ù…Ø¤Ø´Ø± Ø§Ù„ÙƒØªØ§Ø¨Ø©
        function showTypingIndicator() {
            const chatContainer = document.getElementById('chatContainer');
            const typingDiv = document.createElement('div');
            typingDiv.id = 'typingIndicator';
            typingDiv.className = 'ai-message bg-blue-100 rounded-lg p-3 mb-3 max-w-[80%] mr-auto';
            typingDiv.innerHTML = `
                <div class="font-semibold text-blue-800 mb-1">Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯:</div>
                <div class="typing-dots">
                    <span>.</span><span>.</span><span>.</span>
                </div>
            `;
            chatContainer.appendChild(typingDiv);
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }

        function removeTypingIndicator() {
            const typingIndicator = document.getElementById('typingIndicator');
            if (typingIndicator) {
                typingIndicator.remove();
            }
        }

        // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ
        function processAIMessage(userMessage) {
            let response = '';
            
            // ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø³Ø¤Ø§Ù„ ÙˆØ¥Ø¹Ø·Ø§Ø¡ Ø±Ø¯ÙˆØ¯ Ø°ÙƒÙŠØ©
            const lowerMessage = userMessage.toLowerCase();
            
            if (lowerMessage.includes('Ù…Ù†Ø¯ÙˆØ¨') || lowerMessage.includes('ØªØ£Ø®ÙŠØ±')) {
                response = `ØªØ­Ù„ÙŠÙ„ Ø£Ø¯Ø§Ø¡ Ø§Ù„Ù…Ù†Ø§Ø¯ÙŠØ¨:
                
â€¢ ğŸ¥‡ Ù…Ø­Ù…Ø¯ Ø£Ø­Ù…Ø¯ - Ø£ÙØ¶Ù„ Ø£Ø¯Ø§Ø¡ (95% Ù†Ø¬Ø§Ø­)
â€¢ âš ï¸ Ø¹Ù„ÙŠ Ù…Ø­Ù…ÙˆØ¯ - ÙŠØ­ØªØ§Ø¬ Ù…ØªØ§Ø¨Ø¹Ø© (3 ÙÙˆØ§ØªÙŠØ± Ù…ØªØ£Ø®Ø±Ø©)
â€¢ ğŸ“Š Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ù‚ÙŠØ¯ Ø§Ù„ØªÙˆØµÙŠÙ„: 15 ÙØ§ØªÙˆØ±Ø©

ØªÙˆØµÙŠØ©: Ø¥Ø¹Ø§Ø¯Ø© ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ù…Ù‡Ø§Ù… Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù†Ø§Ø¯ÙŠØ¨ Ø§Ù„Ù…ØªØ§Ø­ÙŠÙ†.`;
            }
            else if (lowerMessage.includes('ÙØ§ØªÙˆØ±Ø©') || lowerMessage.includes('ØªØ³Ù„ÙŠÙ…')) {
                response = `Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„ÙÙˆØ§ØªÙŠØ±:
                
âœ… Ù…Ø³Ù„Ù…Ø© Ø§Ù„ÙŠÙˆÙ…: 12 ÙØ§ØªÙˆØ±Ø©
ğŸ•’ Ù‚ÙŠØ¯ Ø§Ù„ØªÙˆØµÙŠÙ„: 8 ÙÙˆØ§ØªÙŠØ±  
âŒ Ù…Ø±ØªØ¬Ø¹Ø©: 2 ÙÙˆØ§ØªÙŠØ±
ğŸ’° Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª: 45,000 Ø¬.Ù…

Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ù…ØªØ£Ø®Ø±Ø©: ÙØ§ØªÙˆØ±ØªÙŠÙ† ÙÙ‚Ø·.`;
            }
            else if (lowerMessage.includes('Ù…Ø®Ø²ÙˆÙ†') || lowerMessage.includes('Ù…Ù†ØªØ¬')) {
                response = `Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø®Ø²ÙˆÙ†:
                
ğŸŸ¢ Ù…Ù†ØªØ¬Ø§Øª Ù…ØªÙˆÙØ±Ø©: 18 ØµÙ†Ù
ğŸŸ¡ Ù…Ù†Ø®ÙØ¶Ø©: 3 Ø£ØµÙ†Ø§Ù
ğŸ”´ Ù…Ù†ØªÙ‡ÙŠØ©: 0 Ø£ØµÙ†Ø§Ù

Ø§Ù„Ø£ØµÙ†Ø§Ù Ø§Ù„Ù…Ù†Ø®ÙØ¶Ø© ØªØ­ØªØ§Ø¬ Ø¥Ø¹Ø§Ø¯Ø© Ø·Ù„Ø¨.`;
            }
            else if (lowerMessage.includes('Ø¹Ù…ÙŠÙ„') || lowerMessage.includes('Ø¹Ù…Ù„Ø§Ø¡')) {
                response = `ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡:
                
ğŸ† Ø£ÙØ¶Ù„ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡:
1. Ø´Ø±ÙƒØ© Ø§Ù„ØªÙ‚Ù†ÙŠØ© - 25 ÙØ§ØªÙˆØ±Ø©
2. Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯ - 18 ÙØ§ØªÙˆØ±Ø©
3. Ø³Ø§Ø±Ø© Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡ - 12 ÙØ§ØªÙˆØ±Ø©

Ø£Ù†Ø´Ø· Ù…Ù†Ø·Ù‚Ø©: Ù…Ø¯ÙŠÙ†Ø© Ù†ØµØ±.`;
            }
            else {
                response = `Ø£ÙÙ‡Ù… Ø£Ù†Ùƒ ØªØ±ÙŠØ¯ Ù…Ø¹Ø±ÙØ© Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø­ÙˆÙ„: "${userMessage}"

ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ ÙÙŠ:
â€¢ ØªØ­Ù„ÙŠÙ„ Ø£Ø¯Ø§Ø¡ Ø§Ù„Ù…Ù†Ø§Ø¯ÙŠØ¨
â€¢ Ù…ØªØ§Ø¨Ø¹Ø© Ø­Ø§Ù„Ø© Ø§Ù„ÙÙˆØ§ØªÙŠØ±
â€¢ Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ù…Ø®Ø²ÙˆÙ†
â€¢ ØªØ­Ù„ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡

Ù…Ø§ Ø§Ù„Ø°ÙŠ ØªØ±ÙŠØ¯ Ù…Ø¹Ø±ÙØªÙ‡ Ø¨Ø§Ù„ØªÙØµÙŠÙ„ØŸ`;
            }
            
            addMessageToChat('ai', response);
        }

        // Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø³Ø±ÙŠØ¹Ø©
        function askQuickQuestion(question) {
            const chatInput = document.getElementById('chatInput');
            chatInput.value = question;
            sendMessage();
        }

        // Setup AI Assistant
        function setupAIAssistant() {
            const aiBtn = document.getElementById('aiAssistantBtn');
            const modal = document.getElementById('aiModal');
            const closeBtn = document.getElementById('closeAiModal');

            aiBtn?.addEventListener('click', () => {
                modal.classList.remove('hidden');
                // Ø§Ù„ØªØ±ÙƒÙŠØ² Ø¹Ù„Ù‰ Ø­Ù‚Ù„ Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„Ù†Ø§ÙØ°Ø©
                setTimeout(() => {
                    document.getElementById('chatInput')?.focus();
                }, 100);
            });

            closeBtn?.addEventListener('click', () => {
                modal.classList.add('hidden');
            });

            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    modal.classList.add('hidden');
                }
            });
        }
    </script>
</body>
</html>